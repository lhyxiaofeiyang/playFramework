











<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html id="top" xmlns="http://www.w3.org/1999/xhtml" xmlns:jspwiki="http://www.jspwiki.org">

<head>
  <title>
    PlayFramework: æ·»åŠ æ ‡ç­¾åŠŸèƒ½
  </title>
  











<link rel="stylesheet" media="screen, projection, print" type="text/css"
     href="../templates/default/jspwiki.css" tppabs="http://www.playframework.cn/templates/default/jspwiki.css"/>

<link rel="stylesheet" type="text/css" media="print" 
     href="../templates/default/jspwiki_print.css" tppabs="http://www.playframework.cn/templates/default/jspwiki_print.css" />
<!-- INCLUDERESOURCES (stylesheet) -->

<!-- INCLUDERESOURCES (inlinecss) -->



<noscript>
<style type="text/css">
#hiddenmorepopup { display:block; }
</style>
</noscript>


<script type="text/javascript" src="../scripts/mootools.js" tppabs="http://www.playframework.cn/scripts/mootools.js"></script>
<script type="text/javascript" src="../scripts/prettify.js" tppabs="http://www.playframework.cn/scripts/prettify.js"></script>
<script type="text/javascript" src="../scripts/jspwiki-common.js" tppabs="http://www.playframework.cn/scripts/jspwiki-common.js"></script>
<script type="text/javascript" src="../scripts/jspwiki-commonstyles.js" tppabs="http://www.playframework.cn/scripts/jspwiki-commonstyles.js"></script>
<!-- INCLUDERESOURCES (script) -->





<meta name="wikiContext" content='view' />
<meta name="wikiBaseUrl" content='http://www.playframework.cn/' />
<meta name="wikiPageUrl" content='/wiki/%23%24%25' />
<meta name="wikiEditUrl" content='/Edit.jsp?page=%E6%B7%BB%E5%8A%A0%E6%A0%87%E7%AD%BE%E5%8A%9F%E8%83%BD' />
<meta name="wikiJsonUrl" content='/JSON-RPC' />
<meta name="wikiPageName" content='æ·»åŠ æ ‡ç­¾åŠŸèƒ½' />
<meta name="wikiUserName" content='183.12.170.88' />
<meta name="wikiTemplateUrl" content='/templates/default/' />
<meta name="wikiApplicationName" content='PlayFramework' />

<script type="text/javascript">//<![CDATA[
/* Localized javascript strings: LocalizedStrings[] */
var LocalizedStrings = {
"javascript.edit.allsections":"( All )",
"javascript.slimbox.error":"<h2>Error</h2>There was a problem with your request.<br />Please try again",
"javascript.slimbox.remoteRequest":"Remote Request {0} of {1}",
"javascript.slimbox.close":"Close &#215;",
"javascript.quick.edit.htm"/*tpa=http://www.playframework.cn/wiki/javascript.quick.edit*/:"[Edit]",
"javascript.sort.descending":"Descending order. Click to reverse sort order",
"javascript.expand":"Click to expand",
"javascript.group.validName":"Please provide a valid name for the new Group",
"javascript.slimbox.next.htm"/*tpa=http://www.playframework.cn/wiki/javascript.slimbox.next*/:"Next&raquo;",
"javascript.filter.all.htm"/*tpa=http://www.playframework.cn/wiki/javascript.filter.all*/:"( All )",
"javascript.edit.areyousure":"Without clicking the Save button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.quick.edit.title":"Edit section {0}...",
"javascript.slimbox.directLink":"Direct Link to the target",
"javascript.prefs.areyousure":"Without clicking the Save User Preferences button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.sbox.clone.suffix":"-New",
"javascript.slimbox.info.htm"/*tpa=http://www.playframework.cn/wiki/javascript.slimbox.info*/:"Image {0} of {1}",
"javascript.tip.default.title":"More...",
"javascript.edit.resize":"Drag to resize the text area",
"javascript.edit.findandreplace.nomatch":"No match found!",
"javascript.sort.ascending":"Ascending order. Click to reverse sort order",
"javascript.slimbox.close.title":"Close [Esc]",
"javascript.edit.toolbar.makeSelection":"Please make first a selection.",
"javascript.favs.hide.htm"/*tpa=http://www.playframework.cn/wiki/javascript.favs.hide*/:"Click to hide Favorites",
"javascript.sectionediting.label":"Section Overview",
"javascript.slimbox.previous":"&laquo;Previous",
"javascript.favs.show.htm"/*tpa=http://www.playframework.cn/wiki/javascript.favs.show*/:"Click to show Favorites",
"javascript.collapse":"Click to collapse",
"javascript.category.title":"Click to show category [{0}] ...",
"javascript.sort.click":"Click to sort",
"javascript.edit.startOfPage":"( Start of page )"
};


/* INCLUDERESOURCES (jsfunction) */

//]]></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="search" href="/wiki/FindPage"
    title='Search PlayFramework' />
<link rel="help"   href="/wiki/TextFormattingRules"
    title="Help" />

 <link rel="start"  href="/wiki/PlayFramework%20Tutorial"
    title="Front page" />
<link rel="alternate stylesheet" type="text/css" href="/templates/default/jspwiki_print.css"
    title="Print friendly" />
<link rel="alternate stylesheet" type="text/css" href="/templates/default/jspwiki.css"
    title="Standard" />
<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico" />

<link rel="icon" type="image/x-icon" href="/images/favicon.ico" />



  










  
  
  
</head>

<body class="view">

<div id="wikibody" class="fav-left">
 
  






<div id="header">

  <div class="titlebox"></div>

  <div class="applicationlogo" > 
    <a href="PlayFramework Tutorial.htm" tppabs="http://www.playframework.cn/wiki/PlayFramework%20Tutorial"
       title="Go to home page PlayFramework Tutorial ">Home</a>
  </div>

  <div class="companylogo"></div>

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="../Login.jsp-redirect=æ·»åŠ æ ‡ç­¾åŠŸèƒ½.htm" tppabs="http://www.playframework.cn/Login.jsp?redirect=%E6%B7%BB%E5%8A%A0%E6%A0%87%E7%AD%BE%E5%8A%9F%E8%83%BD" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="../UserPreferences.jsp-redirect=æ·»åŠ æ ‡ç­¾åŠŸèƒ½.htm" tppabs="http://www.playframework.cn/UserPreferences.jsp?redirect=%E6%B7%BB%E5%8A%A0%E6%A0%87%E7%AD%BE%E5%8A%9F%E8%83%BD"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>

  <div class="pagename">æ·»åŠ æ ‡ç­¾åŠŸèƒ½</div>

  <div class="searchbox">






<form action="http://www.playframework.cn/Search.jsp"
        class="wikiform"
           id="searchForm" accept-charset="UTF-8">

  <div style="position:relative">
  <input onblur="if( this.value == '' ) { this.value = this.defaultValue }; return true; "
        onfocus="if( this.value == this.defaultValue ) { this.value = ''}; return true; "
           type="text" value="Quick Navigation"
           name="query" id="query"
           size="20" 
      accesskey="f" />
  <button type="submit"
  		 name="searchSubmit" id="searchSubmit"
  		value="Go!"
  		title="Go!"></button>
  </div>
  <div id="searchboxMenu" style='visibility:hidden;'>
    <div id="searchTools">
      <a href="#" id='quickView' class='action'
      onclick="SearchBox.navigate( '/wiki/__PAGEHERE__','View the selected page' );"
        title="View the selected page">view</a>
      <a href="#" id='quickEdit' class='action'
      onclick="SearchBox.navigate( '../Login.jsp-redirect=__PAGEHERE__.htm'/*tpa=http://www.playframework.cn/Login.jsp?redirect=__PAGEHERE__*/,'Edit the selected page' );"
        title="Edit the selected page">edit</a>
      <a href="#" id='quickClone' class='action'	
      onclick="return SearchBox.navigate( '../Login.jsp-redirect=__PAGEHERE__.htm'/*tpa=http://www.playframework.cn/Login.jsp?redirect=__PAGEHERE__*/, 'Clone the selected page', true );"
        title="Clone the selected page">clone</a>
      <a href="#" id="advancedSearch" class='action'
      onclick="SearchBox.navigate( '../Search.jsp-query=__PAGEHERE__.htm'/*tpa=http://www.playframework.cn/Search.jsp?query=__PAGEHERE__*/,'æ·»åŠ æ ‡ç­¾åŠŸèƒ½' )"
        title="Advanced Search [ f ]">find</a>
    </div>
    <div id="searchResult" >
	  Quick search
      <span id="searchTarget" >(type ahead)</span>
      <span id="searchSpin" class="spin" style="position:absolute;display:none;"></span>
	  <div id="searchOutput" ></div>
    </div>
    <div id="recentSearches" style="display:none;">
      Recent Searches
      <span><a href="#" id="recentClear">(Clear)</a></span>
    </div>
  </div>

</form></div>

  <div class="breadcrumbs">Your trail:&nbsp;<a class="wikipage" href="CSSæ‰©å±•.htm" tppabs="http://www.playframework.cn/wiki/CSS%E6%89%A9%E5%B1%95">CSSæ‰©å±•</a>, <a class="wikipage" href="Google App Engine.htm" tppabs="http://www.playframework.cn/wiki/Google%20App%20Engine">Google App Engine</a>, <a class="wikipage" href="Google Web Toolkit.htm" tppabs="http://www.playframework.cn/wiki/Google%20Web%20Toolkit">Google Web Toolkit</a>, <a class="wikipage" href="Bespinåœ¨çº¿ç¼–è¾‘å™¨.htm" tppabs="http://www.playframework.cn/wiki/Bespin%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8">Bespinåœ¨çº¿ç¼–è¾‘å™¨</a>, <a class="wikipage" href="æœ¬ç« å°ç»“11.htm" tppabs="http://www.playframework.cn/wiki/%E6%9C%AC%E7%AB%A0%E5%B0%8F%E7%BB%9311">æœ¬ç« å°ç»“11</a>, <a class="wikipage" href="é¡¹ç›®å¯åŠ¨.htm" tppabs="http://www.playframework.cn/wiki/%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8">é¡¹ç›®å¯åŠ¨</a>, <a class="wikipage" href="æ•°æ®æ¨¡å‹è¿­ä»£.htm" tppabs="http://www.playframework.cn/wiki/%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E8%BF%AD%E4%BB%A3">æ•°æ®æ¨¡å‹è¿­ä»£</a>, <a class="wikipage" href="æ„å»ºé¡µé¢.htm" tppabs="http://www.playframework.cn/wiki/%E6%9E%84%E5%BB%BA%E9%A1%B5%E9%9D%A2">æ„å»ºé¡µé¢</a>, <a class="wikipage" href="æ˜¾ç¤ºæ–‡ç« å’Œå‘å¸ƒè¯„è®º.htm" tppabs="http://www.playframework.cn/wiki/%E6%98%BE%E7%A4%BA%E6%96%87%E7%AB%A0%E5%92%8C%E5%8F%91%E5%B8%83%E8%AF%84%E8%AE%BA">æ˜¾ç¤ºæ–‡ç« å’Œå‘å¸ƒè¯„è®º</a>, <a class="wikipage" href="è®¾ç½®å›¾å½¢éªŒè¯ç .htm" tppabs="http://www.playframework.cn/wiki/%E8%AE%BE%E7%BD%AE%E5%9B%BE%E5%BD%A2%E9%AA%8C%E8%AF%81%E7%A0%81">è®¾ç½®å›¾å½¢éªŒè¯ç </a></div>

</div>

  <div id="content">

    <div id="page">
      





<div id="actionsTop" class="pageactions"> 
  <ul>

    
    
    

    
    <li id="morebutton">
      <a href="MoreMenu.htm" tppabs="http://www.playframework.cn/wiki/MoreMenu" class="action more">More...</a>
    </li>

  </ul>
</div>

      








<div class="tabmenu">

  

  

  
  
  
    
  
    
  



  <a class="activetab" id="menu-pagecontent" accesskey="v" ><span class='accesskey'>V</span>iew</a>

  

  
  <a id="menu-attach" accesskey="a" ><span class='accesskey'>A</span>ttach</a>
  
    
  <a id="menu-info" href="../PageInfo.jsp-page=æ·»åŠ æ ‡ç­¾åŠŸèƒ½.htm" tppabs="http://www.playframework.cn/PageInfo.jsp?page=%E6%B7%BB%E5%8A%A0%E6%A0%87%E7%AD%BE%E5%8A%9F%E8%83%BD" accesskey="i" ><span class='accesskey'>I</span>nfo</a>
    
  

</div>
<div class="tabs">

  <div id="pagecontent" >

    











<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;éšç€ç”¨æˆ·çš„ä½¿ç”¨ï¼Œåšå®¢ä¸­å‘è¡¨çš„æ–‡ç« ä¼šè¶Šæ¥è¶Šå¤šï¼Œæ–‡ç« çš„è·å–å’Œç®¡ç†ä¹Ÿå°±å˜å¾—æ›´åŠ å›°éš¾ã€‚ä¸ºäº†ä¾¿äºæ–‡ç« è¿›è¡Œåˆ†ç±»ç®¡ç†ï¼Œæˆ‘ä»¬ä¸ºåšå®¢å¢åŠ äº†æ ‡ç­¾(Tag)æ”¯æŒã€‚
</p><p><br />
<h3 id="section-_E6_B7_BB_E5_8A_A0_E6_A0_87_E7_AD_BE_E5_8A_9F_E8_83_BD-12.6.1Tag_E6_A8_A1_E5_9E_8B_E7_B1_BB">12.6.1 Tagæ¨¡å‹ç±»:<a class="hashlink" href="#section-_E6_B7_BB_E5_8A_A0_E6_A0_87_E7_AD_BE_E5_8A_9F_E8_83_BD-12.6.1Tag_E6_A8_A1_E5_9E_8B_E7_B1_BB">#</a></h3>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨yabe/app/modelsç›®å½•ä¸­æ–°å»ºTag.javaï¼Œä½œä¸ºæ ‡ç­¾ç±»å¯¹æ–‡ç« è¿›è¡Œç®¡ç†ï¼š
</p>
<div class="prettify">
<pre>
package models;
 
import java.util.*;
import javax.persistence.*;
 
import play.db.jpa.*;
 
@Entity
public class Tag extends Model implements Comparable&lt;Tag&gt; {
 
    public String name;
 
    private Tag(String name) {
        this.name = name;
    }
 
    public String toString() {
        return name;
    }
 
    public int compareTo(Tag otherTag) {
        return name.compareTo(otherTag.name);
    }
}
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¹¶ä¸ºTagç±»å¢åŠ findOrCreateByName(String name)å·¥å‚æ–¹æ³•ï¼Œæ–¹ä¾¿å¯¹æ ‡ç­¾è¿›è¡Œç®¡ç†(å…ˆæŸ¥è¯¢æ ‡ç­¾ï¼Œè‹¥ç»“æœä¸å­˜åœ¨åˆ™åˆ›å»ºè¯¥æ ‡ç­¾):
</p>
<div class="prettify">
<pre>
public static Tag findOrCreateByName(String name) {
    Tag tag = Tag.find(&quot;byName&quot;, name).first();
    if(tag == null) {
        tag = new Tag(name);
    }
    return tag;
}
</pre>
</div>
<p><br />
<h3 id="section-_E6_B7_BB_E5_8A_A0_E6_A0_87_E7_AD_BE_E5_8A_9F_E8_83_BD-12.6.2_E4_BF_AE_E6_94_B9Post_E7_B1_BB">12.6.2 ä¿®æ”¹Postç±»<a class="hashlink" href="#section-_E6_B7_BB_E5_8A_A0_E6_A0_87_E7_AD_BE_E5_8A_9F_E8_83_BD-12.6.2_E4_BF_AE_E6_94_B9Post_E7_B1_BB">#</a></h3>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç”±äºå¯¹åšå®¢çš„æ–‡ç« åšæ ‡ç­¾æ‰©å±•ï¼Œæ‰€ä»¥Postç±»éœ€è¦è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼Œä½¿Postæ¨¡å‹å’ŒTagæ¨¡å‹å…³è”èµ·æ¥ã€‚åœ¨Postç±»ä¸­å¢åŠ æ–‡ç« ä¸æ ‡ç­¾çš„å¤šå¯¹å¤šå…³è”ï¼š
</p>
<div class="prettify">
<pre>
...
@ManyToMany(cascade=CascadeType.PERSIST)
public Set&lt;Tag&gt; tags;
 
public Post(User author, String title, String content) {
    this.comments = new ArrayList&lt;Comment&gt;();
    this.tags = new TreeSet&lt;Tag&gt;();
    this.author = author;
    this.title = title;
    this.content = content;
    this.postedAt = new Date();
}
...
</pre>
</div>
<p><br />
</p>
<div class="quote">
è¡¥å……ï¼š
<p>Postæ¨¡å‹ä¸­é‡‡ç”¨TreeSetå®¹å™¨å­˜æ”¾Tagï¼Œæ˜¯ä¸ºäº†ä¿è¯æ ‡ç­¾åˆ—è¡¨ä»¥æœ‰åºçš„å½¢å¼ä¿å­˜(Tagæ¨¡å‹ä¸­é‡å†™äº†compareTo()æ–¹æ³•ï¼Œæ ‡ç­¾åˆ—è¡¨å°†æŒ‰ç…§nameå±æ€§æ’åºï¼‰ã€‚
</p></div>
<br />

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ¥ä¸‹æ¥ä¸ºPostç±»å¢åŠ ä¸€äº›è¾…åŠ©æ–¹æ³•ï¼Œç»§ç»­ç®€åŒ–æ ‡ç­¾çš„ç®¡ç†ã€‚å®šä¹‰tagItWith()æ–¹æ³•ï¼Œç”¨äºä¸ºæ–‡ç« æ·»åŠ æ ‡ç­¾ï¼š
</p>
<div class="prettify">
<pre>
...
public Post tagItWith(String name) {
    tags.add(Tag.findOrCreateByName(name));
    return this;
}
...
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å®šä¹‰findTaggedWith()æ–¹æ³•ï¼Œç”¨äºè·å–æŒ‡å®šæ ‡ç­¾çš„æ‰€æœ‰æ–‡ç« ï¼š
</p>
<div class="prettify">
<pre>
...
public static List&lt;Post&gt; findTaggedWith(String tag) {
    return Post.find(
        &quot;select distinct p from Post p join p.tags as t where t.name = ?&quot;, tag
    ).fetch();
}
...
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç”±äºæˆ‘ä»¬å¯¹åšå®¢å¼•æ“çš„æ¨¡å‹å±‚åšäº†è¾ƒå¤šçš„ä¿®æ”¹å’Œæ‰©å±•ï¼Œéœ€è¦è¿›è¡Œæµ‹è¯•ä»¥ä¿è¯ä»£ç çš„æ­£ç¡®æ€§ã€‚åœ¨BasicTest.javaæ–‡ä»¶ä¸­ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š
</p>
<div class="prettify">
<pre>
@Test
public void testTags(){

    // åˆ›å»ºç”¨æˆ·å¹¶ä¿å­˜
    User savage=new User(&quot;demo5@oopsplay.org&quot;,&quot;123&quot;,&quot;savage&quot;).save();
    	
    // å‘è¡¨æ–‡ç« 
    Post savagePost=new Post(savage,&quot;My first post&quot;,&quot;Hello world&quot;).save();
    Post anotherSavagePost=new Post(savage,&quot;My second post&quot;,&quot;Hello word2&quot;).save();
    	
    // æµ‹è¯•
    assertEquals(0,Post.findTaggedWith(&quot;Red&quot;).size());
    	
    // ä¸ºæ–‡ç« æ·»åŠ æ ‡ç­¾
    savagePost.tagItWith(&quot;Red&quot;).tagItWith(&quot;Blue&quot;).save();
    anotherSavagePost.tagItWith(&quot;Red&quot;).tagItWith(&quot;Green&quot;).save();
    	
    // æµ‹è¯•
    assertEquals(2,Post.findTaggedWith(&quot;Red&quot;).size());
    assertEquals(1,Post.findTaggedWith(&quot;Blue&quot;).size());
    assertEquals(1,Post.findTaggedWith(&quot;Green&quot;).size());
}
</pre>
</div>
<p />
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä½¿ç”¨<b>play test</b>å‘½ä»¤å¼€å¯æµ‹è¯•æ¨¡å¼ï¼Œè¿è¡Œæµ‹è¯•å¥—ä»¶ç¡®ä¿åšå®¢å¼•æ“ä¸€åˆ‡æ­£å¸¸ã€‚
</p>
<div class="prettify">
<pre>
play test
</pre>
</div>
<p><br />
<h3 id="section-_E6_B7_BB_E5_8A_A0_E6_A0_87_E7_AD_BE_E5_8A_9F_E8_83_BD-12.6.3_E9_80_9A_E8_BF_87_E6_8C_87_E5_AE_9A_E6_A0_87_E7_AD_BE_E6_9F_A5_E6_89_BE_E6_96_87_E7_AB_A0">12.6.3 é€šè¿‡æŒ‡å®šæ ‡ç­¾æŸ¥æ‰¾æ–‡ç« <a class="hashlink" href="#section-_E6_B7_BB_E5_8A_A0_E6_A0_87_E7_AD_BE_E5_8A_9F_E8_83_BD-12.6.3_E9_80_9A_E8_BF_87_E6_8C_87_E5_AE_9A_E6_A0_87_E7_AD_BE_E6_9F_A5_E6_89_BE_E6_96_87_E7_AB_A0">#</a></h3>
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æœ¬èŠ‚ä»‹ç»å¦‚ä½•ä½¿ç”¨JPQLè¯­å¥ï¼Œå®ç°å¤šä¸ªæ ‡ç­¾æ ‡è®°çš„æ–‡ç« çš„æŸ¥è¯¢ã€‚è™½ç„¶è¯¥æ–¹æ³•æœ‰äº›æ™¦æ¶©ï¼Œä½†æ¯”è¾ƒå®ç”¨ï¼Œè¯»è€…å¯ä»¥å°†è¯¥æ–¹æ³•åº”ç”¨äºå…¶ä»–Webé¡¹ç›®ä¸­ï¼š
</p>
<div class="prettify">
<pre>
...
public static List&lt;Post&gt; findTaggedWith(String... tags) {
    return Post.find(
            &quot;select distinct p from Post p join p.tags as t where t.name in (:tags) group by p.id, p.author, p.title, p.content,p.postedAt having count(t.id) = :size&quot;
    ).bind(&quot;tags&quot;, tags).bind(&quot;size&quot;, tags.length).fetch();
}
...
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸Šä¾‹ä½¿ç”¨having countå­å¥ï¼Œä»è¿æ¥è§†å›¾ä¸­è¿‡æ»¤å‡ºæŒ‡å®šæ ‡ç­¾æ ‡è®°çš„æ–‡ç« ã€‚
</p>
<p><br />
</p>
<div class="quote">
æ³¨æ„ï¼š
<p>æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨Post.find(&quot;...&quot;,tags,tags.count)æ–¹å¼è¿›è¡ŒæŸ¥è¯¢ã€‚å› ä¸ºtagsæœ¬èº«å°±æ˜¯åŠ¨æ€å˜é‡ï¼Œtags.countéœ€è¦è¿è¡Œæ—¶æ‰èƒ½åŠ¨æ€è®¡ç®—å‡ºæ¥ã€‚
</p></div>
<br />

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç»§ç»­ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œå¯¹å®ç°çš„æŸ¥è¯¢åŠŸèƒ½è¿›è¡ŒéªŒè¯ï¼š
</p>
<div class="prettify">
<pre>
...
assertEquals(1, Post.findTaggedWith(&quot;Red&quot;, &quot;Blue&quot;).size());   
assertEquals(1, Post.findTaggedWith(&quot;Red&quot;, &quot;Green&quot;).size());   
assertEquals(0, Post.findTaggedWith(&quot;Red&quot;, &quot;Green&quot;, &quot;Blue&quot;).size());  
assertEquals(0, Post.findTaggedWith(&quot;Green&quot;, &quot;Blue&quot;).size());
...
</pre>
</div>
<p><br />
<h3 id="section-_E6_B7_BB_E5_8A_A0_E6_A0_87_E7_AD_BE_E5_8A_9F_E8_83_BD-12.6.4_E6_A0_87_E7_AD_BE_E4_BA_91">12.6.4 æ ‡ç­¾äº‘<a class="hashlink" href="#section-_E6_B7_BB_E5_8A_A0_E6_A0_87_E7_AD_BE_E5_8A_9F_E8_83_BD-12.6.4_E6_A0_87_E7_AD_BE_E4_BA_91">#</a></h3>
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å½“æ•°æ®åº“ä¸­å­˜å‚¨äº†å¾ˆå¤šæ ‡ç­¾åï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºTagç±»æ·»åŠ getCloud()æ–¹æ³•ï¼Œå®ç°æ ‡ç­¾äº‘åŠŸèƒ½ï¼š
</p>
<div class="prettify">
<pre>
public static List&lt;Map&gt; getCloud() {
    List&lt;Map&gt; result = Tag.find(
        &quot;select new map(t.name as tag, count(p.id) as pound) from Post p join p.tags as t group by t.name order by t.name&quot;
    ).fetch();
    return result;
}
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hibernateå…·æœ‰éå¸¸äººæ€§åŒ–çš„ç‰¹æ€§ï¼Œå…è®¸æˆ‘ä»¬ä½¿ç”¨JPAæŸ¥è¯¢è¿”å›è‡ªå®šä¹‰å¯¹è±¡ç±»å‹ã€‚ä¸Šä¾‹ä¼šè¿”å›ä¸€ç»„Mapå¯¹è±¡ï¼ŒåŒ…å«äº†ä¸¤ä¸ªå±æ€§ï¼šæ ‡ç­¾åtagå’Œæ ‡ç­¾æ•°é‡poundã€‚
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç¼–å†™ç›¸åº”æµ‹è¯•ä»£ç è¿›è¡Œæµ‹è¯•ï¼š
</p>
<div class="prettify">
<pre>
...
List&lt;Map&gt; cloud = Tag.getCloud();
assertEquals(
    &quot;[{tag=Blue, pound=1}, {tag=Green, pound=1}, {tag=Red, pound=2}]&quot;,
    cloud.toString()
);
</pre>
</div>
<p><br />
<h3 id="section-_E6_B7_BB_E5_8A_A0_E6_A0_87_E7_AD_BE_E5_8A_9F_E8_83_BD-12.6.5_E5_9C_A8_E5_8D_9A_E5_AE_A2_E7_95_8C_E9_9D_A2_E4_B8_AD_E6_98_BE_E7_A4_BA_E6_A0_87_E7_AD_BE">12.6.5 åœ¨åšå®¢ç•Œé¢ä¸­æ˜¾ç¤ºæ ‡ç­¾<a class="hashlink" href="#section-_E6_B7_BB_E5_8A_A0_E6_A0_87_E7_AD_BE_E5_8A_9F_E8_83_BD-12.6.5_E5_9C_A8_E5_8D_9A_E5_AE_A2_E7_95_8C_E9_9D_A2_E4_B8_AD_E6_98_BE_E7_A4_BA_E6_A0_87_E7_AD_BE">#</a></h3>
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ—¢ç„¶åšå®¢å¼•æ“å·²ç»æ‹¥æœ‰æ ‡ç­¾åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ä¸€ç§æ–°çš„æ–¹å¼æµè§ˆåšå®¢ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œä½¿ç”¨YAMLæ–‡ä»¶åˆå§‹åŒ–æ•°æ®ã€‚ç¼–è¾‘/yabe/conf/initial-data.ymlæ–‡ä»¶ï¼Œå¢åŠ ä¸€äº›æµ‹è¯•æ ‡ç­¾ï¼š
</p>
<div class="prettify">
<pre>
...
Tag(play):
    name:           Play
 
Tag(architecture):
    name:           Architecture
 
Tag(test):
    name:           Test
 
Tag(mvc):
    name:           MVC
...
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¹‹åå°†å®šä¹‰å¥½çš„æ ‡ç­¾æ·»åŠ è‡³æ–‡ç« ä¸­ï¼š
</p>
<div class="prettify">
<pre>
...
Post(jeffPost):
    title:          The MVC application
    postedAt:       2009-06-06
    author:         jeff
    tags:
                    - play
                    - architecture
                    - mvc
    content:        &gt;
                    A Play
...
</pre>
</div>
<p><br />
</p>
<div class="quote">
æ³¨æ„ï¼š
<p>å› ä¸ºæ–‡ç« éœ€è¦å‚è€ƒè¿™äº›æ ‡ç­¾ï¼Œæ‰€ä»¥æ ‡ç­¾å’Œæ–‡ç« å®šä¹‰çš„é¡ºåºä¸èƒ½é¢ å€’ï¼Œå¿…é¡»å°†æ ‡ç­¾çš„å®šä¹‰æ”¾åœ¨YAMLæ–‡ä»¶çš„æœ€é¡¶éƒ¨ã€‚
</p></div>

<p><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é‡å¯åº”ç”¨ï¼Œæ¡†æ¶è‡ªåŠ¨åŠ è½½æœ€æ–°çš„åˆå§‹åŒ–æ•°æ®é›†ã€‚æˆ‘ä»¬æ³¨æ„åˆ°Playç”šè‡³è¿YAMLæ–‡ä»¶çš„é”™è¯¯ä¹Ÿä¼šå¾ˆå‹å¥½åœ°æ˜¾ç¤ºå‡ºæ¥ï¼Œå¦‚å›¾12.16æ‰€ç¤ºã€‚
</p>
<p><img class="inline" src="../attach/å›¾ç‰‡èµ„æº/guide6-1.png" tppabs="http://www.playframework.cn/attach/%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90/guide6-1.png" alt="å›¾ç‰‡èµ„æº/guide6-1.png" />
</p>
<p />
<p><b>(å›¾12.16 Playæ˜¾ç¤ºymlæ–‡ä»¶çš„é”™è¯¯)</b>
</p>
<p />
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ¥ä¸‹æ¥ä¿®æ”¹#{display /}çš„å®šä¹‰ï¼Œä½¿åšå®¢æ˜¾ç¤ºæ–‡ç« çš„åŒæ—¶ï¼Œä¹Ÿæ˜¾ç¤ºæ ‡è®°è¯¥æ–‡ç« çš„æ ‡ç­¾ï¼Œç•Œé¢æ•ˆæœå¦‚å›¾12.17æ‰€ç¤ºã€‚
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç¼–è¾‘/yabe/app/views/tags/display.htmlæ–‡ä»¶ï¼š
</p>
<div class="prettify">
<pre>
...
#{if _as != 'full'}
    &lt;span class=&quot;post-comments&quot;&gt;
        &amp;nbsp;|&amp;nbsp; ${_post.comments.size() ?: 'no'}
        comment${_post.comments.size().pluralize()}
        #{if _post.comments}
            , latest by ${_post.comments[0].author}
        #{/if}
    &lt;/span&gt;
#{/if}
#{elseif _post.tags}
    &lt;span class=&quot;post-tags&quot;&gt;
        - Tagged
        #{list items:_post.tags, as:'tag'}
            &lt;a href=&quot;#&quot;&gt;${tag}&lt;/a&gt;${tag_isLast ? '' : ', '}
        #{/list}
    &lt;/span&gt;
#{/elseif}
...
</pre>
</div>
<p><img class="inline" src="../attach/å›¾ç‰‡èµ„æº/guide6-2.png" tppabs="http://www.playframework.cn/attach/%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90/guide6-2.png" alt="å›¾ç‰‡èµ„æº/guide6-2.png" />
</p>
<p><b>(å›¾12.17 æ˜¾ç¤ºæ–‡ç« æ ‡ç­¾)</b>
</p>
<p><br />
<h3 id="section-_E6_B7_BB_E5_8A_A0_E6_A0_87_E7_AD_BE_E5_8A_9F_E8_83_BD-12.6.6_E5_AE_9A_E4_B9_89_E6_A0_87_E7_AD_BE_E9_A1_B5_E9_9D_A2">12.6.6 å®šä¹‰æ ‡ç­¾é¡µé¢<a class="hashlink" href="#section-_E6_B7_BB_E5_8A_A0_E6_A0_87_E7_AD_BE_E5_8A_9F_E8_83_BD-12.6.6_E5_AE_9A_E4_B9_89_E6_A0_87_E7_AD_BE_E9_A1_B5_E9_9D_A2">#</a></h3>
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä½¿ç”¨æ ‡ç­¾å¯¹æ–‡ç« è¿›è¡Œåˆ†ç±»ä¼šæœ‰å¾ˆå¤šå¥½å¤„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åšå®¢å¼•æ“ä¸­é‡‡ç”¨æ ‡ç­¾åˆ†ç±»çš„å½¢å¼æ˜¾ç¤ºæ–‡ç« åˆ—è¡¨ã€‚ä¿®æ”¹ä¸Šä¾‹ä¸­çš„ä»£ç ï¼Œå°†åŸæ¥&lt;a&gt;&lt;/a&gt;ä¸­ç©ºç™½çš„é“¾æ¥æŒ‡å‘listTagged Actionï¼š
</p>
<div class="prettify">
<pre>
...
- Tagged
#{list items:_post.tags, as:'tag'}
    &lt;a href=&quot;@{Application.listTagged(tag.name)}&quot;&gt;${tag}&lt;/a&gt;${tag_isLast ? '' : ', '}
#{/list}
...
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨Applicationæ§åˆ¶å™¨ä¸­åˆ›å»ºç›¸åº”çš„listTaggedæ–¹æ³•ï¼š
</p>
<div class="prettify">
<pre>
...
public static void listTagged(String tag) {
    List&lt;Post&gt; posts = Post.findTaggedWith(tag);
    render(tag, posts);
}
...
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¹¶ä¸ºå…¶æŒ‡å®šè·¯ç”±ï¼š
</p>
<div class="prettify">
<pre>
GET     /posts/{tag}                    Application.listTagged
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¹‹å‰æˆ‘ä»¬ä¸ºshow ActionæŒ‡å®šçš„è·¯ç”±ä¼šå’ŒlistTagged Actionçš„è·¯ç”±å†²çªï¼Œå› ä¸ºè¿™ä¸¤æ¡è·¯ç”±ä¼šåŒ¹é…ç›¸åŒçš„URIã€‚
</p>
<div class="prettify">
<pre>
GET     /posts/{id}                     Application.show
GET     /posts/{tag}                    Application.listTagged
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show Actionä¸­ä¼ é€’çš„å‚æ•°idæ˜¯æ•°å­—ç±»å‹çš„ï¼Œè€ŒlistTagged Actionä¸­ä¼ é€’çš„æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„å‚æ•°ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹ç¬¬ä¸€æ¡è·¯ç”±è¿›è¡Œçº¦æŸï¼Œéå¸¸å·§å¦™åœ°è§£å†³äº†å†²çªé—®é¢˜ï¼š
</p>
<div class="prettify">
<pre>
GET     /posts/{&lt;[0-9]+&gt;id}             Application.show
GET     /posts/{tag}                    Application.listTagged
</pre>
</div>
<p />
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æœ€åæˆ‘ä»¬åˆ›å»º/yabe/app/views/Application/listTagged.htmlæ¨¡ç‰ˆè¿›è¡Œæ¸²æŸ“ï¼Œç•Œé¢æ•ˆæœå¦‚å›¾12.18æ‰€ç¤ºï¼š
</p>
<div class="prettify">
<pre>
#{extends 'main.html' /}
#{set title:'Posts tagged with ' + tag /}
 
*{********* Title ********* }*
 
#{if posts.size() &gt; 1}
   &lt;h3&gt;There are ${posts.size()} posts tagged '${tag}'&lt;/h3&gt;
#{/if}
#{elseif posts}
    &lt;h3&gt;There is 1 post tagged '${tag}'&lt;/h3&gt;
#{/elseif}
#{else}
    &lt;h3&gt;No post tagged '${tag}'&lt;/h3&gt;
#{/else}
 
*{********* Posts list *********}*
 
&lt;div class=&quot;older-posts&quot;&gt;
    #{list items:posts, as:'post'}
        #{display post:post, as:'teaser' /}
    #{/list}
&lt;/div&gt;
</pre>
</div>
<p><img class="inline" src="../attach/å›¾ç‰‡èµ„æº/guide6-3.png" tppabs="http://www.playframework.cn/attach/%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90/guide6-3.png" alt="å›¾ç‰‡èµ„æº/guide6-3.png" />
</p>
<p><b>(å›¾12.18 listTagged.htmlæ¨¡ç‰ˆæ¸²æŸ“ç»“æœ)</b>
</p>






        
  </div>


  

  
  <div id="attach" class="hidetab" >

    










<div id="addattachment">
<h3>Add new attachment</h3>


<div class="formhelp">Only authorized users are allowed to upload new attachments.</div>

</div>



  </div>

  
    
  <div id="info" class="hidetab" >

  </div>

    
  

<div style="clear:both;" ></div>
</div>

      







<div id='actionsBottom' class="pageactions"> 
    

    <a href="#top" 
      class="action quick2top" 
      title="Go to top" >&laquo;</a>

    
       This page (revision-9) was last changed on <a href="../Diff.jsp-page=æ·»åŠ æ ‡ç­¾åŠŸèƒ½&r1=9&r2=8.htm" tppabs="http://www.playframework.cn/Diff.jsp?page=%E6%B7%BB%E5%8A%A0%E6%A0%87%E7%AD%BE%E5%8A%9F%E8%83%BD&r1=9&r2=8">14-Feb-2012 08:28</a> by éƒ‘èˆ’å¤©
    

    

   

  

   
</div>

    </div>

    






<div id="favorites">

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="../Login.jsp-redirect=æ·»åŠ æ ‡ç­¾åŠŸèƒ½.htm" tppabs="http://www.playframework.cn/Login.jsp?redirect=%E6%B7%BB%E5%8A%A0%E6%A0%87%E7%AD%BE%E5%8A%9F%E8%83%BD" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="../UserPreferences.jsp-redirect=æ·»åŠ æ ‡ç­¾åŠŸèƒ½.htm" tppabs="http://www.playframework.cn/UserPreferences.jsp?redirect=%E6%B7%BB%E5%8A%A0%E6%A0%87%E7%AD%BE%E5%8A%9F%E8%83%BD"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>
  
  <div id="hiddenmorepopup">
  <ul id="morepopup">
     
       	
     
       
     
    
       
     
       <li>
       
       <a class="action rawpage wikipage" 
               href="æ·»åŠ æ ‡ç­¾åŠŸèƒ½-skin=raw.htm" tppabs="http://www.playframework.cn/wiki/%E6%B7%BB%E5%8A%A0%E6%A0%87%E7%AD%BE%E5%8A%9F%E8%83%BD?skin=raw"
              title="View Page Source">View Page Source
       </a>
       
       
       </li>
      
        
  
      
      
      

      
	  <li class='separator'>
        <div id="moremenu" ></div>
      </li>
  </ul>
  </div>
  
  

  

  

  
  <div class="leftmenu">
    <hr />
<p><b>Play!China Wiki</b>
</p>
<p />
<ul><li><a class="wikipage" href="PlayFramework Tutorial.htm" tppabs="http://www.playframework.cn/wiki/PlayFramework%20Tutorial">ä¹¦ç±æ’°å†™</a>
</li></ul><ul><li><a class="wikipage" href="PlayChina Team.htm" tppabs="http://www.playframework.cn/wiki/PlayChina%20Team">å›¢é˜Ÿé¦–é¡µ</a>
</li></ul><ul><li><a class="wikipage" href="å›¾ç‰‡èµ„æº.htm" tppabs="http://www.playframework.cn/wiki/%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90">å›¾ç‰‡èµ„æº</a>
</li></ul><ul><li><a class="wikipage" href="ç¤¾åŒºç°çŠ¶.htm" tppabs="http://www.playframework.cn/wiki/%E7%A4%BE%E5%8C%BA%E7%8E%B0%E7%8A%B6">ç¤¾åŒºç°çŠ¶</a>
</li></ul><ul><li><a class="wikipage" href="å‘å±•è½¨è¿¹.htm" tppabs="http://www.playframework.cn/wiki/%E5%8F%91%E5%B1%95%E8%BD%A8%E8%BF%B9">å‘å±•è½¨è¿¹</a>
</li></ul><ul><li><a class="wikipage" href="è”ç³»æˆ‘ä»¬.htm" tppabs="http://www.playframework.cn/wiki/%E8%81%94%E7%B3%BB%E6%88%91%E4%BB%AC">è”ç³»æˆ‘ä»¬</a>
</li></ul>
    
  </div>
  
  <div class="leftmenufooter">
    <hr />
<p><b>Official Platform</b>
</p>
<ul><li><a class="external" href="javascript:if(confirm('http://www.oopsplay.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.oopsplay.org/'" tppabs="http://www.oopsplay.org/">å®˜æ–¹é—¨æˆ·</a><img class="outlink" src="../images/out.png" tppabs="http://www.playframework.cn/images/out.png" alt="" />
</li></ul><p />
<ul><li><a class="external" href="mailto:dhl@playframework.cn">å›¢é˜Ÿé‚®ç®±</a><img class="outlink" src="../images/out.png" tppabs="http://www.playframework.cn/images/out.png" alt="" />
</li></ul><p />
<hr />
<b>Cooperative Site</b>
<p><br />
<table border="0" class="imageplugin">
<tr><td><img src="../attach/LeftMenuFooter/oschina_logo.png" tppabs="http://www.playframework.cn/attach/LeftMenuFooter/oschina_logo.png" /></td></tr>
</table>

<table border="0" class="imageplugin">
<tr><td><img src="../attach/LeftMenuFooter/logo.gif" tppabs="http://www.playframework.cn/attach/LeftMenuFooter/logo.gif" height="75" width="165" /></td></tr>
</table>

<table border="0" class="imageplugin">
<tr><td><img src="../../tva1.sinaimg.cn/crop.0.0.180.180.180/634352b0jw1e8qgp5bmzyj2050050aa8.jpg" tppabs="http://tp1.sinaimg.cn/1665356464/180/1279885352/1" height="165" width="165" /></td></tr>
</table>

</p>
<p />
    
  </div>

  

  
  <!-- 
  <div class="wikiversion">JSPWiki v2.8.4
  --> 
 <span class="rssfeed">
    
  </span>
  </div>  
  <div style="display:none">
    <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1252938720'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/stat.php%3Fid%3D1252938720' type='text/javascript'%3E%3C/script%3E"));</script>
  </div>
</div>


	<div class="clearbox"></div>
  </div>

  





 
<div id="footer">

  <div class="applicationlogo" > 
    <a href="PlayFramework Tutorial.htm" tppabs="http://www.playframework.cn/wiki/PlayFramework%20Tutorial"
       title="Go to home page PlayFramework Tutorial ">Home</a>
  </div>

  <div class="companylogo"></div>

  <div class="copyright"></div>

  <div class="wikiversion">
    JSPWiki v2.8.4
  </div>

  <div class="rssfeed">
    
  </div>

</div>

</div>

</body>
</html>

