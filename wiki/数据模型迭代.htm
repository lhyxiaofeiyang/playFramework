











<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html id="top" xmlns="http://www.w3.org/1999/xhtml" xmlns:jspwiki="http://www.jspwiki.org">

<head>
  <title>
    PlayFramework: æ•°æ®æ¨¡å‹è¿­ä»£
  </title>
  











<link rel="stylesheet" media="screen, projection, print" type="text/css"
     href="../templates/default/jspwiki.css" tppabs="http://www.playframework.cn/templates/default/jspwiki.css"/>

<link rel="stylesheet" type="text/css" media="print" 
     href="../templates/default/jspwiki_print.css" tppabs="http://www.playframework.cn/templates/default/jspwiki_print.css" />
<!-- INCLUDERESOURCES (stylesheet) -->

<!-- INCLUDERESOURCES (inlinecss) -->



<noscript>
<style type="text/css">
#hiddenmorepopup { display:block; }
</style>
</noscript>


<script type="text/javascript" src="../scripts/mootools.js" tppabs="http://www.playframework.cn/scripts/mootools.js"></script>
<script type="text/javascript" src="../scripts/prettify.js" tppabs="http://www.playframework.cn/scripts/prettify.js"></script>
<script type="text/javascript" src="../scripts/jspwiki-common.js" tppabs="http://www.playframework.cn/scripts/jspwiki-common.js"></script>
<script type="text/javascript" src="../scripts/jspwiki-commonstyles.js" tppabs="http://www.playframework.cn/scripts/jspwiki-commonstyles.js"></script>
<!-- INCLUDERESOURCES (script) -->





<meta name="wikiContext" content='view' />
<meta name="wikiBaseUrl" content='http://www.playframework.cn/' />
<meta name="wikiPageUrl" content='/wiki/%23%24%25' />
<meta name="wikiEditUrl" content='/Edit.jsp?page=%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E8%BF%AD%E4%BB%A3' />
<meta name="wikiJsonUrl" content='/JSON-RPC' />
<meta name="wikiPageName" content='æ•°æ®æ¨¡å‹è¿­ä»£' />
<meta name="wikiUserName" content='183.12.170.88' />
<meta name="wikiTemplateUrl" content='/templates/default/' />
<meta name="wikiApplicationName" content='PlayFramework' />

<script type="text/javascript">//<![CDATA[
/* Localized javascript strings: LocalizedStrings[] */
var LocalizedStrings = {
"javascript.edit.allsections":"( All )",
"javascript.slimbox.error":"<h2>Error</h2>There was a problem with your request.<br />Please try again",
"javascript.slimbox.remoteRequest":"Remote Request {0} of {1}",
"javascript.slimbox.close":"Close &#215;",
"javascript.quick.edit.htm"/*tpa=http://www.playframework.cn/wiki/javascript.quick.edit*/:"[Edit]",
"javascript.sort.descending":"Descending order. Click to reverse sort order",
"javascript.expand":"Click to expand",
"javascript.group.validName":"Please provide a valid name for the new Group",
"javascript.slimbox.next.htm"/*tpa=http://www.playframework.cn/wiki/javascript.slimbox.next*/:"Next&raquo;",
"javascript.filter.all.htm"/*tpa=http://www.playframework.cn/wiki/javascript.filter.all*/:"( All )",
"javascript.edit.areyousure":"Without clicking the Save button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.quick.edit.title":"Edit section {0}...",
"javascript.slimbox.directLink":"Direct Link to the target",
"javascript.prefs.areyousure":"Without clicking the Save User Preferences button, your changes will be lost. Are you sure you want to exit this page?",
"javascript.sbox.clone.suffix":"-New",
"javascript.slimbox.info.htm"/*tpa=http://www.playframework.cn/wiki/javascript.slimbox.info*/:"Image {0} of {1}",
"javascript.tip.default.title":"More...",
"javascript.edit.resize":"Drag to resize the text area",
"javascript.edit.findandreplace.nomatch":"No match found!",
"javascript.sort.ascending":"Ascending order. Click to reverse sort order",
"javascript.slimbox.close.title":"Close [Esc]",
"javascript.edit.toolbar.makeSelection":"Please make first a selection.",
"javascript.favs.hide.htm"/*tpa=http://www.playframework.cn/wiki/javascript.favs.hide*/:"Click to hide Favorites",
"javascript.sectionediting.label":"Section Overview",
"javascript.slimbox.previous":"&laquo;Previous",
"javascript.favs.show.htm"/*tpa=http://www.playframework.cn/wiki/javascript.favs.show*/:"Click to show Favorites",
"javascript.collapse":"Click to collapse",
"javascript.category.title":"Click to show category [{0}] ...",
"javascript.sort.click":"Click to sort",
"javascript.edit.startOfPage":"( Start of page )"
};


/* INCLUDERESOURCES (jsfunction) */

//]]></script>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="search" href="/wiki/FindPage"
    title='Search PlayFramework' />
<link rel="help"   href="/wiki/TextFormattingRules"
    title="Help" />

 <link rel="start"  href="/wiki/PlayFramework%20Tutorial"
    title="Front page" />
<link rel="alternate stylesheet" type="text/css" href="/templates/default/jspwiki_print.css"
    title="Print friendly" />
<link rel="alternate stylesheet" type="text/css" href="/templates/default/jspwiki.css"
    title="Standard" />
<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico" />

<link rel="icon" type="image/x-icon" href="/images/favicon.ico" />



  










  
  
  
</head>

<body class="view">

<div id="wikibody" class="fav-left">
 
  






<div id="header">

  <div class="titlebox"></div>

  <div class="applicationlogo" > 
    <a href="PlayFramework Tutorial.htm" tppabs="http://www.playframework.cn/wiki/PlayFramework%20Tutorial"
       title="Go to home page PlayFramework Tutorial ">Home</a>
  </div>

  <div class="companylogo"></div>

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="../Login.jsp-redirect=æ•°æ®æ¨¡å‹è¿­ä»£.htm" tppabs="http://www.playframework.cn/Login.jsp?redirect=%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E8%BF%AD%E4%BB%A3" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="../UserPreferences.jsp-redirect=æ•°æ®æ¨¡å‹è¿­ä»£.htm" tppabs="http://www.playframework.cn/UserPreferences.jsp?redirect=%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E8%BF%AD%E4%BB%A3"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>

  <div class="pagename">æ•°æ®æ¨¡å‹è¿­ä»£</div>

  <div class="searchbox">






<form action="http://www.playframework.cn/Search.jsp"
        class="wikiform"
           id="searchForm" accept-charset="UTF-8">

  <div style="position:relative">
  <input onblur="if( this.value == '' ) { this.value = this.defaultValue }; return true; "
        onfocus="if( this.value == this.defaultValue ) { this.value = ''}; return true; "
           type="text" value="Quick Navigation"
           name="query" id="query"
           size="20" 
      accesskey="f" />
  <button type="submit"
  		 name="searchSubmit" id="searchSubmit"
  		value="Go!"
  		title="Go!"></button>
  </div>
  <div id="searchboxMenu" style='visibility:hidden;'>
    <div id="searchTools">
      <a href="#" id='quickView' class='action'
      onclick="SearchBox.navigate( '/wiki/__PAGEHERE__','View the selected page' );"
        title="View the selected page">view</a>
      <a href="#" id='quickEdit' class='action'
      onclick="SearchBox.navigate( '../Login.jsp-redirect=__PAGEHERE__.htm'/*tpa=http://www.playframework.cn/Login.jsp?redirect=__PAGEHERE__*/,'Edit the selected page' );"
        title="Edit the selected page">edit</a>
      <a href="#" id='quickClone' class='action'	
      onclick="return SearchBox.navigate( '../Login.jsp-redirect=__PAGEHERE__.htm'/*tpa=http://www.playframework.cn/Login.jsp?redirect=__PAGEHERE__*/, 'Clone the selected page', true );"
        title="Clone the selected page">clone</a>
      <a href="#" id="advancedSearch" class='action'
      onclick="SearchBox.navigate( '../Search.jsp-query=__PAGEHERE__.htm'/*tpa=http://www.playframework.cn/Search.jsp?query=__PAGEHERE__*/,'æ•°æ®æ¨¡å‹è¿­ä»£' )"
        title="Advanced Search [ f ]">find</a>
    </div>
    <div id="searchResult" >
	  Quick search
      <span id="searchTarget" >(type ahead)</span>
      <span id="searchSpin" class="spin" style="position:absolute;display:none;"></span>
	  <div id="searchOutput" ></div>
    </div>
    <div id="recentSearches" style="display:none;">
      Recent Searches
      <span><a href="#" id="recentClear">(Clear)</a></span>
    </div>
  </div>

</form></div>

  <div class="breadcrumbs">Your trail:&nbsp;<a class="wikipage" href="Mongoæ¨¡å—.htm" tppabs="http://www.playframework.cn/wiki/Mongo%E6%A8%A1%E5%9D%97">Mongoæ¨¡å—</a>, <a class="wikipage" href="Secureæ¨¡å—.htm" tppabs="http://www.playframework.cn/wiki/Secure%E6%A8%A1%E5%9D%97">Secureæ¨¡å—</a>, <a class="wikipage" href="Searchæ¨¡å—.htm" tppabs="http://www.playframework.cn/wiki/Search%E6%A8%A1%E5%9D%97">Searchæ¨¡å—</a>, <a class="wikipage" href="Springæ”¯æŒ.htm" tppabs="http://www.playframework.cn/wiki/Spring%E6%94%AF%E6%8C%81">Springæ”¯æŒ</a>, <a class="wikipage" href="CSSæ‰©å±•.htm" tppabs="http://www.playframework.cn/wiki/CSS%E6%89%A9%E5%B1%95">CSSæ‰©å±•</a>, <a class="wikipage" href="Google App Engine.htm" tppabs="http://www.playframework.cn/wiki/Google%20App%20Engine">Google App Engine</a>, <a class="wikipage" href="Google Web Toolkit.htm" tppabs="http://www.playframework.cn/wiki/Google%20Web%20Toolkit">Google Web Toolkit</a>, <a class="wikipage" href="Bespinåœ¨çº¿ç¼–è¾‘å™¨.htm" tppabs="http://www.playframework.cn/wiki/Bespin%E5%9C%A8%E7%BA%BF%E7%BC%96%E8%BE%91%E5%99%A8">Bespinåœ¨çº¿ç¼–è¾‘å™¨</a>, <a class="wikipage" href="æœ¬ç« å°ç»“11.htm" tppabs="http://www.playframework.cn/wiki/%E6%9C%AC%E7%AB%A0%E5%B0%8F%E7%BB%9311">æœ¬ç« å°ç»“11</a>, <a class="wikipage" href="é¡¹ç›®å¯åŠ¨.htm" tppabs="http://www.playframework.cn/wiki/%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8">é¡¹ç›®å¯åŠ¨</a></div>

</div>

  <div id="content">

    <div id="page">
      





<div id="actionsTop" class="pageactions"> 
  <ul>

    
    
    

    
    <li id="morebutton">
      <a href="MoreMenu.htm" tppabs="http://www.playframework.cn/wiki/MoreMenu" class="action more">More...</a>
    </li>

  </ul>
</div>

      








<div class="tabmenu">

  

  

  
  
  
    
  
    
  



  <a class="activetab" id="menu-pagecontent" accesskey="v" ><span class='accesskey'>V</span>iew</a>

  

  
  <a id="menu-attach" accesskey="a" ><span class='accesskey'>A</span>ttach</a>
  
    
  <a id="menu-info" href="../PageInfo.jsp-page=æ•°æ®æ¨¡å‹è¿­ä»£.htm" tppabs="http://www.playframework.cn/PageInfo.jsp?page=%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E8%BF%AD%E4%BB%A3" accesskey="i" ><span class='accesskey'>I</span>nfo</a>
    
  

</div>
<div class="tabs">

  <div id="pagecontent" >

    











<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æœ¬èŠ‚å°†ç€é‡ä»‹ç»yabeæ¨¡å‹ç±»çš„æ„å»ºã€‚
</p><p><br />
<h3 id="section-_E6_95_B0_E6_8D_AE_E6_A8_A1_E5_9E_8B_E8_BF_AD_E4_BB_A3-12.2.1_E4_BD_BF_E7_94_A8JPA">12.2.1 ä½¿ç”¨JPA<a class="hashlink" href="#section-_E6_95_B0_E6_8D_AE_E6_A8_A1_E5_9E_8B_E8_BF_AD_E4_BB_A3-12.2.1_E4_BD_BF_E7_94_A8JPA">#</a></h3>
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ¨¡å‹å±‚ï¼ˆModelï¼‰åœ¨Playåº”ç”¨ä¸­å¤„äºæ ¸å¿ƒåœ°ä½ï¼ˆäº‹å®ä¸Šåœ¨æ‰€æœ‰è®¾è®¡è‰¯å¥½çš„åº”ç”¨ä¸­éƒ½æ˜¯å¦‚æ­¤ï¼‰ï¼Œè¿™ä¹Ÿæ˜¯é¢†åŸŸæ¨¡å‹é©±åŠ¨çš„è¡¨ç°ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ›å»ºåšå®¢å¼•æ“åº”ç”¨ï¼Œå…¶ä¸­æ¨¡å‹å±‚åŒ…å«Userï¼ŒPostï¼ŒCommentç­‰ç±»ã€‚å¯¹è¿™äº›æ¨¡å‹ç±»çš„å®ä¾‹å¯¹è±¡è¿›è¡Œæ“ä½œå‰ï¼Œéœ€è¦å…ˆå°†è¿™äº›å¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ã€‚å—ç›ŠäºJavaçš„é¢å‘å¯¹è±¡ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ORMï¼ˆå¯¹è±¡-å…³ç³»æ•°æ®åº“æ˜ å°„Object Relational Mapperï¼‰äº§å“æ¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨è¿›è¡Œå¯¹è±¡ä¸æ•°æ®ä¹‹é—´çš„æ˜ å°„ã€‚
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Playä½¿ç”¨JPAçš„å®ç°Hibernateè¿›è¡Œè‡ªåŠ¨æ˜ å°„ã€‚åœ¨Playä¸­æ— éœ€è¿›è¡Œä»»ä½•é…ç½®ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨JPAï¼Œä¸‹é¢æˆ‘ä»¬å°†ä»‹ç»é€šè¿‡JPAåˆ›å»ºæ¨¡å‹ç±»ã€‚
</p>
<p><br />
<h3 id="section-_E6_95_B0_E6_8D_AE_E6_A8_A1_E5_9E_8B_E8_BF_AD_E4_BB_A3-12.2.2User_E7_B1_BB">12.2.2 Userç±»<a class="hashlink" href="#section-_E6_95_B0_E6_8D_AE_E6_A8_A1_E5_9E_8B_E8_BF_AD_E4_BB_A3-12.2.2User_E7_B1_BB">#</a></h3>
  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é¦–å…ˆåˆ›å»ºUseræ¨¡å‹ç±»ã€‚åœ¨yabe/app/modelsç›®å½•ä¸‹æ–°å»ºUser.javaï¼Œç¼–å†™Userç±»çš„åˆæ­¥å®ç°ï¼š
</p>
<div class="prettify">
<pre>
package models;
 
import java.util.*;
import javax.persistence.*;
 
import play.db.jpa.*;
 
@Entity
public class User extends Model {
 
    public String email;
    public String password;
    public String fullname;
    public boolean isAdmin;
    
    public User(String email, String password, String fullname) {
        this.email = email;
        this.password = password;
        this.fullname = fullname;
    }
 
}
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Entityæ³¨è§£æ ‡è®°Userç±»ä¸ºå—ç®¡ç†çš„JPAå®ä½“ï¼Œå¹¶ä¸”è¶…ç±»Modelæä¾›äº†ä¸€å¥—æœ‰ç”¨çš„JPAæ–¹æ³•ï¼Œç±»ä¸­çš„æ‰€æœ‰å±æ€§ä¼šè‡ªåŠ¨æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ã€‚
</p>
<p><br />
</p>
<div class="quote">
æ³¨æ„ï¼š
<p>æ¨¡å‹å¯¹è±¡ç»§æ‰¿play.db.jpa.Modelå¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»¥çº¯JPAå®ç°ï¼Œä½†æ˜¯ç»§æ‰¿Modelç±»åœ¨å¾ˆå¤šæƒ…å†µä¸‹æ˜¯æœ€ä½³é€‰æ‹©ã€‚
</p></div>

<p><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦‚æœè¯»è€…ä¹‹å‰å·²ç»ä½¿ç”¨è¿‡JPAï¼Œå°±åº”è¯¥çŸ¥é“æ¯ä¸ªJPAå®ä½“å¿…é¡»æ·»åŠ @Idå±æ€§ã€‚play.db.jpa.Modelè¶…ç±»æä¾›äº†è‡ªåŠ¨ç”Ÿæˆçš„æ•°å­—idä¸»é”®ï¼Œå·²ç»å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†çš„éœ€æ±‚ã€‚
</p>
<p><br />
</p>
<div class="quote">
æ³¨æ„ï¼š
<p>ä¸è¦å°†è‡ªåŠ¨ç”Ÿæˆçš„idå­—æ®µä½œä¸ºåŠŸèƒ½æ€§çš„æ ‡è¯†ç¬¦(åº”è¯¥ç†è§£ä¸ºæŠ€æœ¯æ€§æ ‡è¯†ï¼Œè¯»è€…æœ€å¥½å¯¹è¿™ä¸¤ä¸ªæ¦‚å¿µæœ‰æ‰€åŒºåˆ†)ã€‚
</p></div>
<br />

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åˆ·æ–°åº”ç”¨çš„ä¸»é¡µæŸ¥çœ‹ç»“æœï¼ˆé™¤éæœ‰é”™è¯¯å‘ç”Ÿï¼Œå¦åˆ™æˆ‘ä»¬çœ‹ä¸åˆ°ä»»ä½•æ”¹å˜ï¼‰ï¼šPlayå·²ç»è‡ªåŠ¨ç¼–è¯‘å¹¶ä¸”åŠ è½½Userç±»ï¼Œä½†å¹¶æ²¡æœ‰ä¸ºåº”ç”¨æä¾›ä»»ä½•åŠŸèƒ½ç‰¹æ€§ã€‚
</p>
<p><br />
<h3 id="section-_E6_95_B0_E6_8D_AE_E6_A8_A1_E5_9E_8B_E8_BF_AD_E4_BB_A3-12.2.3_E7_BC_96_E5_86_99_E9_A6_96_E4_B8_AA_E6_B5_8B_E8_AF_95">12.2.3 ç¼–å†™é¦–ä¸ªæµ‹è¯•<a class="hashlink" href="#section-_E6_95_B0_E6_8D_AE_E6_A8_A1_E5_9E_8B_E8_BF_AD_E4_BB_A3-12.2.3_E7_BC_96_E5_86_99_E9_A6_96_E4_B8_AA_E6_B5_8B_E8_AF_95">#</a></h3>
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç¼–å†™JUnitæµ‹è¯•ç”¨ä¾‹æ˜¯æµ‹è¯•æ–°å»ºçš„Userç±»çš„æœ€å¥½æ–¹æ³•ã€‚æµ‹è¯•é©±åŠ¨å¼€å‘çš„ä¼˜ç‚¹æ˜¯ï¼šå…è®¸æˆ‘ä»¬é€æ­¥å®Œæˆåº”ç”¨ï¼Œå¹¶ç¡®ä¿ä¸€åˆ‡éƒ½æ­£å¸¸ã€‚
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸ºäº†è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œéœ€è¦åœ¨ç‰¹æ®Šçš„testæ¨¡å¼ä¸‹å¯åŠ¨åº”ç”¨ã€‚åœæ­¢å½“å‰è¿è¡Œä¸­çš„åº”ç”¨ï¼Œæ‰“å¼€å‘½ä»¤è¡Œè¾“å…¥ï¼š
</p>
<div class="prettify">
<pre>
play test yabe
</pre>
</div>
<p><img class="inline" src="../attach/å›¾ç‰‡èµ„æº/yabe_test.png" tppabs="http://www.playframework.cn/attach/%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90/yabe_test.png" alt="å›¾ç‰‡èµ„æº/yabe_test.png" />
</p>
<p><b>(å›¾12.3 å‘½ä»¤è¡Œè¾“å…¥play testå‘½ä»¤)</b>
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>Play test</b>å‘½ä»¤ä¸<b>play run</b>å‘½ä»¤å‡ ä¹ä¸€æ ·ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯å‰è€…åŠ è½½äº†æµ‹è¯•è¿è¡Œæ¨¡å—ï¼Œä»¥ä¾¿ç›´æ¥ä»æµè§ˆå™¨ä¸­è¿è¡Œæµ‹è¯•å¥—ä»¶ã€‚
</p>
<p><br />
</p>
<div class="quote">
æç¤ºï¼š
<p>å½“åº”ç”¨åœ¨testæ¨¡å¼ä¸‹è¿è¡Œæ—¶ï¼ŒPlayä¼šè‡ªåŠ¨é€‰æ‹©testä½œä¸ºæ¡†æ¶IDï¼ŒåŒæ—¶åŠ è½½ç›¸åº”çš„application.confé…ç½®æ–‡ä»¶ä¿¡æ¯ã€‚
</p></div>

<p><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åœ¨æµè§ˆå™¨ä¸­è¾“å…¥http://localhost:9000/@testsï¼Œé¡µé¢æ˜¾ç¤ºçš„å°±æ˜¯æµ‹è¯•è¿è¡Œå™¨ï¼Œå¦‚å›¾12.4æ‰€ç¤ºã€‚é€‰æ‹©æ‰€æœ‰é»˜è®¤çš„æµ‹è¯•ç„¶åè¿è¡Œï¼Œå¯è§æ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡äº†ï¼Œå› ä¸ºè¿™äº›æµ‹è¯•å¹¶æ²¡æœ‰åšä»»ä½•æœ‰æ•ˆçš„äº‹æƒ…ã€‚
</p>
<p><img class="inline" src="../attach/å›¾ç‰‡èµ„æº/yabe_test_run.png" tppabs="http://www.playframework.cn/attach/%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90/yabe_test_run.png" alt="å›¾ç‰‡èµ„æº/yabe_test_run.png" />
</p>
<p><b>(å›¾12.4 æµ‹è¯•è¿è¡Œç»“æœ)</b>
</p>
<p />
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘ä»¬é€šå¸¸ä½¿ç”¨JUnitå¯¹æ¨¡å‹å¯¹è±¡è¿›è¡Œæµ‹è¯•ï¼Œæ¡†æ¶è‡ªå¸¦é»˜è®¤çš„BasicTest.javaæµ‹è¯•æ–‡ä»¶ï¼ˆ/yabe/test/BasicTest.javaï¼‰ï¼š
</p>
<div class="prettify">
<pre>
import org.junit.*;
import play.test.*;
import models.*;
 
public class BasicTest extends UnitTest {
 
    @Test
    public void aVeryImportantThingToTest() {
        assertEquals(2, 1 + 1);
    }
 
}
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åˆ é™¤æ— ç”¨çš„é»˜è®¤æµ‹è¯•æ–¹æ³•ï¼ˆaVeryImportantThingToTestï¼‰ï¼Œç¼–å†™è‡ªå®šä¹‰æµ‹è¯•ï¼Œåˆ›å»ºæ–°ç”¨æˆ·å¹¶è¯»å–è¯¥ç”¨æˆ·æ•°æ®ï¼š
</p>
<div class="prettify">
<pre>
import org.junit.*;
import java.util.*;
import play.test.*;
import models.*;

public class BasicTest extends UnitTest {

    @Test
    public void createAndRetriveUser(){
    	//åˆ›å»ºæ–°ç”¨æˆ·å¹¶ä¿å­˜
    	new User(&quot;demo@oopsplay.org&quot;,&quot;123&quot;,&quot;savage&quot;).save();
    	
    	//ä½¿ç”¨é‚®ç®±åœ°å€è¯»å–ç”¨æˆ·æ•°æ®
    	User savage=User.find(&quot;byEmail&quot;,&quot;demo@oopsplay.org&quot;).first();
    	
    	//æµ‹è¯•
    	assertNotNull(savage);
    	assertEquals(&quot;savage&quot;,savage.fullname);
    	
    }

}
</pre>
</div>
<p />
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä»¥ä¸Šæµ‹è¯•ä»£ç ä¸­ä½¿ç”¨äº†Modelè¶…ç±»æä¾›çš„ä¸¤ä¸ªéå¸¸æœ‰ç”¨çš„æ–¹æ³•ï¼šsave()å’Œfind()ã€‚åœ¨æµ‹è¯•è¿è¡Œå™¨ä¸­é€‰æ‹©BasicTest.javaï¼Œç‚¹å‡»Start!æŒ‰é’®è¿›è¡Œæµ‹è¯•ï¼Œå¹¶æ£€æŸ¥ç»“æœæ˜¯å¦éƒ½å‘ˆç»¿è‰²ã€‚
</p>
<p />
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¿®æ”¹User.javaæ–‡ä»¶ï¼Œæ·»åŠ connect()æ–¹æ³•æ£€æŸ¥ç‰¹å®šç”¨æˆ·åå’Œå¯†ç æ˜¯å¦å­˜åœ¨ï¼š
</p>
<p />
<div class="prettify">
<pre>
public static User connect(String email, String password) {
    return find(&quot;byEmailAndPassword&quot;, email, password).first();
}
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¹‹ååœ¨BasicTest.javaä¸­ç¼–å†™æ–°çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯•connect()æ–¹æ³•ï¼š
</p>
<div class="prettify">
<pre>
@Test
public void tryConnectAsUser(){
    	
    new User(&quot;demo@oopsplay.org&quot;,&quot;123&quot;,&quot;savage&quot;).save();
    	
    assertNotNull(User.connect(&quot;demo@oopsplay.org&quot;, &quot;123&quot;));
    assertNull(User.connect(&quot;dhl@oopsplay.org&quot;, &quot;123&quot;));
    assertNull(User.connect(&quot;demo@oopsplay.org&quot;, &quot;456&quot;));
    	
}

</pre>
</div>
<p />
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ¯æ¬¡ä»£ç æ›´æ–°åå¯ä»¥åœ¨Playçš„æµ‹è¯•è¿è¡Œå™¨ä¸­è¿è¡Œæ‰€æœ‰çš„æµ‹è¯•ï¼Œç¡®ä¿åº”ç”¨æ²¡æœ‰é­åˆ°ä»»ä½•ç ´åã€‚
</p>
<p><br />
<h3 id="section-_E6_95_B0_E6_8D_AE_E6_A8_A1_E5_9E_8B_E8_BF_AD_E4_BB_A3-12.2.4Post_E7_B1_BB">12.2.4 Postç±»<a class="hashlink" href="#section-_E6_95_B0_E6_8D_AE_E6_A8_A1_E5_9E_8B_E8_BF_AD_E4_BB_A3-12.2.4Post_E7_B1_BB">#</a></h3>
</p>
<p />
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Postç±»è¡¨ç¤ºåšå®¢ä¸­å‘è¡¨çš„æ–‡ç« ï¼Œæ¥ä¸‹æ¥ç¼–å†™è¯¥ç±»çš„åˆæ­¥å®ç°ï¼š
</p>
<div class="prettify">
<pre>
package models;
 
import java.util.*;
import javax.persistence.*;
 
import play.db.jpa.*;
 
@Entity
public class Post extends Model {
 
    public String title;
    public Date postedAt;
    
    @Lob
    public String content;
    
    @ManyToOne
    public User author;
    
    public Post(User author, String title, String content) {
        this.author = author;
        this.title = title;
        this.content = content;
        this.postedAt = new Date();
    }
 
}
</pre>
</div>
<p />
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Postç±»çš„å®šä¹‰ä¸­ä½¿ç”¨@Lobæ³¨è§£é€šçŸ¥JPAä½¿ç”¨é•¿æ–‡æœ¬æ•°æ®ç±»å‹å­˜å‚¨æ–‡ç« çš„ä¸»ä½“å†…å®¹ï¼Œä½¿ç”¨@ManyToOneæ³¨è§£å£°æ˜Postç±»ä¸Userç±»çš„å¤šå¯¹ä¸€å…³ç³»ï¼ˆè¡¨ç¤ºæ¯ç¯‡Postç”±å•ä¸ªUserå‘è¡¨ï¼Œæ¯ä¸ªUserèƒ½å¤Ÿæ’°å†™å¤šç¯‡Postï¼‰ã€‚
</p>
<p />
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç¼–å†™æ–°çš„æµ‹è¯•ç”¨ä¾‹æ£€æŸ¥Postç±»æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚ä½†æ˜¯åœ¨ç¼–å†™è¿™äº›æµ‹è¯•ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹BasicTest.javaæµ‹è¯•æ–‡ä»¶è¿›è¡Œä¸€äº›æ“ä½œã€‚å› ä¸ºæµ‹è¯•è¿›è¡Œåˆ°å½“å‰é˜¶æ®µï¼Œå†…å­˜æ•°æ®åº“çš„å†…å®¹ä»æœªè¢«æ¸…é™¤è¿‡ï¼Œæ¯æ¬¡è¿è¡Œæ–°çš„æµ‹è¯•ä¼šåˆ›å»ºè¶Šæ¥è¶Šå¤šçš„å¯¹è±¡ã€‚å½“éœ€è¦è¿è¡Œæ›´åŠ é«˜çº§çš„æµ‹è¯•ï¼ˆå¦‚ç»Ÿè®¡å†…å­˜æ•°æ®åº“ä¸­å¯¹è±¡æ•°é‡ï¼‰æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„é—®é¢˜ã€‚
</p>
<p />
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸ºæµ‹è¯•ç¼–å†™setup()æ–¹æ³•ï¼Œç”¨äºæ¯æ¬¡æµ‹è¯•å‰æ¸…ç©ºæ•°æ®ï¼š
</p>
<div class="prettify">
<pre>
public class BasicTest extends UnitTest {
 
    @Before
    public void setup() {
        Fixtures.deleteAll();
    }
    
    ...
 
}
</pre>
</div>
<p><br />
</p>
<div class="quote">
æç¤ºï¼š
<p>@Beforeæ˜¯JUnitæµ‹è¯•å·¥å…·çš„æ³¨è§£ï¼ŒæŒ‡æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå‰çš„ç¯å¢ƒå¤„ç†ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å‰ç½®å¤„ç†ã€‚
</p></div>

<p><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fixturesæ˜¯æµ‹è¯•ä¸­ç”¨äºå¤„ç†æ•°æ®çš„å·¥å…·ç±»ã€‚å†æ¬¡è¿è¡Œæµ‹è¯•æ£€æŸ¥åº”ç”¨æ˜¯å¦ä¼šå‡ºç°é—®é¢˜ï¼š
</p>
<div class="prettify">
<pre>
@Test
public void createPost(){
    
    //åˆ›å»ºå¹¶ä¿å­˜ç”¨æˆ·
    User savage=new User(&quot;demo2@oopsplay.org&quot;,&quot;123&quot;,&quot;savage&quot;).save();
    	
    //å‘è¡¨æ–°çš„æ–‡ç« 
    new Post(savage,&quot;Title&quot;,&quot;Hello savage&quot;).save();
    	
    //æµ‹è¯•æ–‡ç« å·²ç»æˆåŠŸå‘è¡¨
    assertEquals(1,Post.count());
    	
    //è¯»å–savageå‘å¸ƒçš„æ‰€æœ‰æ–‡ç« 
    List&lt;Post&gt; savagePost=Post.find(&quot;byAuthor&quot;,savage).fetch();
    	
    //æµ‹è¯•
    assertEquals(1,savagePost.size());
    Post firstPost=savagePost.get(0);
    assertNotNull(firstPost);
    assertEquals(savage,firstPost.author);
    assertEquals(&quot;Title&quot;,firstPost.title);
    assertEquals(&quot;Hello savage&quot;,firstPost.content);
    assertNotNull(firstPost.postedAt);
}

</pre>
</div>
<p><br />
</p>
<div class="quote">
æç¤ºï¼š
<p>ä¸è¦å¿˜è®°å¯¼å…¥java.util.ListåŒ…ï¼Œå¦åˆ™ä¼šå‡ºç°ç¼–è¯‘é”™è¯¯ã€‚
</p></div>

<p><br />
<h3 id="section-_E6_95_B0_E6_8D_AE_E6_A8_A1_E5_9E_8B_E8_BF_AD_E4_BB_A3-12.2.5Comment_E7_B1_BB">12.2.5 Commentç±»<a class="hashlink" href="#section-_E6_95_B0_E6_8D_AE_E6_A8_A1_E5_9E_8B_E8_BF_AD_E4_BB_A3-12.2.5Comment_E7_B1_BB">#</a></h3>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;é€šå¸¸åšå®¢ä¸­çš„æ–‡ç« éƒ½å…·æœ‰æ·»åŠ è¯„è®ºçš„åŠŸèƒ½ï¼Œå®šä¹‰Commentç±»ç”¨äºå­˜æ”¾æ–‡ç« çš„è¯„è®ºï¼š
</p>
<div class="prettify">
<pre>
package models;
 
import java.util.*;
import javax.persistence.*;
 
import play.db.jpa.*;
 
@Entity
public class Comment extends Model {
 
    public String author;
    public Date postedAt;
     
    @Lob
    public String content;
    
    @ManyToOne
    public Post post;
    
    public Comment(Post post, String author, String content) {
        this.post = post;
        this.author = author;
        this.content = content;
        this.postedAt = new Date();
    }
 
}
</pre>
</div>
<p />
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ¥ç€ç¼–å†™ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹ï¼š
</p>
<div class="prettify">
<pre>
@Test
public void postComment(){
    //åˆ›å»ºç”¨æˆ·å¹¶ä¿å­˜
    User savage=new User(&quot;demo3@ooposplay.org&quot;,&quot;123&quot;,&quot;savage&quot;).save();
    	
    //å‘è¡¨ä¸€ç¯‡æ–‡ç« 
    Post savagePost=new Post(savage,&quot;Title2&quot;,&quot;Hello savage2&quot;).save();
    	
    //å‘è¡¨è¯„è®º
    new Comment(savagePost,&quot;dhlzj&quot;,&quot;Hi i am dhl&quot;).save();
    new Comment(savagePost,&quot;dhlzj2&quot;,&quot;Hi i am dhl2&quot;).save();
    	
    //è¯»å–æ‰€æœ‰è¯„è®º
    List&lt;Comment&gt; savagePostComments=Comment.find(&quot;byPost&quot;,savagePost).fetch();
    	
    //æµ‹è¯•
    assertEquals(2,savagePostComments.size());
    	
    Comment firstComment=savagePostComments.get(0);
    assertNotNull(firstComment);
    assertEquals(&quot;dhlzj&quot;,firstComment.author);
    assertEquals(&quot;Hi i am dhl&quot;,firstComment.content);
    assertNotNull(firstComment.postedAt);
    	
    Comment secondComment=savagePostComments.get(1);
    assertNotNull(secondComment);
    assertEquals(&quot;dhlzj2&quot;,secondComment.author);
    assertEquals(&quot;Hi i am dhl2&quot;,secondComment.content);
    assertNotNull(secondComment.postedAt);
}
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æˆ‘ä»¬ä¼šå‘ç°Postå’ŒCommentä¹‹é—´çš„å…³ç³»å¹¶ä¸æ˜¯éå¸¸æ¸…æ™°ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æŸ¥è¯¢æ‰èƒ½è·å–æ¯ç¯‡æ–‡ç« æ‰€å¯¹åº”çš„è¯„è®ºã€‚å› è€Œæˆ‘ä»¬å¯ä»¥å°†å…³ç³»å»ºç«‹åˆ°å¦ä¸€è¾¹ï¼Œä¹Ÿå°±æ˜¯Postç±»ä¸­ã€‚åœ¨Postç±»ä¸­æ·»åŠ commentså±æ€§ï¼š
</p>
<div class="prettify">
<pre>
...
@OneToMany(mappedBy=&quot;post&quot;, cascade=CascadeType.ALL)
public List&lt;Comment&gt; comments;
 
public Post(User author, String title, String content) { 
    this.comments = new ArrayList&lt;Comment&gt;();
    this.author = author;
    this.title = title;
    this.content = content;
    this.postedAt = new Date();
}
...
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¯»è€…è¯·æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨çš„mappedByå±æ€§ç”¨äºé€šçŸ¥JPAï¼Œå…³ç³»æ˜¯ç”±Commentç±»ä¸­çš„postå±æ€§æ‰€ç»´æŠ¤çš„ã€‚å½“ç”¨JPAå®šä¹‰åŒå‘å…³ç³»æ—¶ï¼Œå‘Šè¯‰å“ªä¸€è¾¹æ˜¯å…³ç³»ç»´æŠ¤æ–¹å°±æ˜¾å¾—ç‰¹åˆ«é‡è¦ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œç”±äºè¯„è®ºå±äºå‘è¡¨çš„æ–‡ç« ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯ç”±Commentç±»æ¥ç»´æŠ¤ä¸¤è€…ä¹‹é—´çš„å…³ç³»ã€‚
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è®¾ç½®çº§è”å±æ€§é€šçŸ¥JPAï¼Œå½“æ–‡ç« åˆ é™¤çš„æ—¶å€™èƒ½å¤Ÿçº§è”åˆ°è¯„è®ºã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœåˆ é™¤ä¸€ç¯‡æ–‡ç« ï¼Œé‚£ä¹ˆå®ƒçš„è¯„è®ºä¹Ÿéšä¹‹åˆ é™¤ã€‚åœ¨è¿™ä¸ªæ–°çš„å…³ç³»ä¸‹ï¼Œéœ€è¦åœ¨Postç±»ä¸­å¢åŠ ä¸€ä¸ªå¸®åŠ©æ–¹æ³•ä»¥ä¾¿è½»æ¾åœ°å‘å¸ƒè¯„è®ºã€‚
</p>
<div class="prettify">
<pre>
public Post addComment(String author, String content) {
    Comment newComment = new Comment(this, author, content).save();
    this.comments.add(newComment);
    this.save();
    return this;
}
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼š
</p>
<div class="prettify">
<pre>
@Test
public void useTheCommentsRelation(){
    //åˆ›å»ºç”¨æˆ·å¹¶ä¿å­˜
    User savage=new User(&quot;demo4@oopsplay.org&quot;,&quot;123&quot;,&quot;savage&quot;).save();
    	
    //å‘å¸ƒä¸€ç¯‡æ–‡ç« 
    Post savagePost=new Post(savage,&quot;Title3&quot;,&quot;Hi i am dhl3&quot;).save();
    	
    //æ·»åŠ è¯„è®º
    savagePost.addComment(&quot;dhl01&quot;, &quot;good job&quot;);
    savagePost.addComment(&quot;dhl02&quot;, &quot;great&quot;);
    	
    //ç»Ÿè®¡
    assertEquals(1,User.count());
    assertEquals(1,Post.count());
    assertEquals(2,Comment.count());
    	
    //è¯»å–savageå‘è¡¨çš„æ–‡ç« 
    savagePost=Post.find(&quot;byAuthor&quot;,savage).first();
    assertNotNull(savagePost);
    	
    //å¯¼èˆªåˆ°è¯„è®º
    assertEquals(2,savagePost.comments.size());
    assertEquals(&quot;dhl01&quot;,savagePost.comments.get(0).author);
    	
    //åˆ é™¤æ–‡ç« 
    savagePost.delete();
    	
    //æ£€æŸ¥æ‰€æœ‰è¯„è®ºéƒ½å·²ç»åˆ é™¤
    assertEquals(1,User.count());
    assertEquals(0,Post.count());
    assertEquals(0,Comment.count());
}
</pre>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æ‰€æœ‰çš„æµ‹è¯•éƒ½é€šè¿‡ï¼Œå¦‚å›¾12.5æ‰€ç¤ºï¼š
</p>
<p><img class="inline" src="../attach/å›¾ç‰‡èµ„æº/yabe_test_run2.png" tppabs="http://www.playframework.cn/attach/%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90/yabe_test_run2.png" alt="å›¾ç‰‡èµ„æº/yabe_test_run2.png" />
<b>(å›¾12.5 æµ‹è¯•ç»“æœæ˜¾ç¤º)</b>
</p>
<p><br />
<h3 id="section-_E6_95_B0_E6_8D_AE_E6_A8_A1_E5_9E_8B_E8_BF_AD_E4_BB_A3-12.2.6_E4_BD_BF_E7_94_A8Fixtures_E7_BC_96_E5_86_99_E6_9B_B4_E5_8A_A0_E5_A4_8D_E6_9D_82_E7_9A_84_E6_B5_8B_E8_AF_95">12.2.6 ä½¿ç”¨Fixturesç¼–å†™æ›´åŠ å¤æ‚çš„æµ‹è¯•<a class="hashlink" href="#section-_E6_95_B0_E6_8D_AE_E6_A8_A1_E5_9E_8B_E8_BF_AD_E4_BB_A3-12.2.6_E4_BD_BF_E7_94_A8Fixtures_E7_BC_96_E5_86_99_E6_9B_B4_E5_8A_A0_E5_A4_8D_E6_9D_82_E7_9A_84_E6_B5_8B_E8_AF_95">#</a></h3>
</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¤æ‚çš„æµ‹è¯•å¾€å¾€éœ€è¦å¤§é‡çš„æµ‹è¯•æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æµ‹è¯•ä¹‹å‰ä½¿ç”¨Fixturesè°ƒç”¨YAMLæ–‡ä»¶(ç”¨äºæè¿°æ¨¡å‹)ï¼ŒåŠ è½½æµ‹è¯•æ•°æ®ã€‚ç¼–è¾‘/abe/test/data.ymlæ–‡ä»¶ï¼Œæè¿°ç”¨æˆ·ï¼š
</p>
<div class="prettify">
<pre>
User(savage):
   email: demo@oopsplay.org
   password: 123
   fullname: savage

User(savage2):
   email: demo2@oopsplay.org
   password: 123
   fullname: savage2

Post(firstSavagePost):
   title:    About the model layer
   postedAt: 2009-03-25
   author:   savage
   content:  &gt;
             The content of the model layer

Post(secondSavagePost):
   title:    About the model layer
   postedAt: 2009-03-25
   author:   savage2
   content:  &gt;
             The content of the model layer2
             
Post(dhlPost):
   title:    The MVC application
   postedAt: 2009-03-25
   author:   savage2
   content: &gt;
            THe content of MVC
            
Comment(c1):
   author: Gust
   content: &gt;
            You are right!
   postedAt: 2009-03-25
   post: firstSavagePost
   
Comment(c2):
   author: Mike
   content: &gt;
            I know that...
   postedAt: 2009-03-25
   post: firstSavagePost
   
Comment(c3):
   author: Tom
   content: &gt;
            good job.
   postedAt: 2009-03-25
   post: secondSavagePost

</pre>
</div>
<p><br />
</p>
<div class="quote">
æç¤ºï¼š
<p>æ³¨æ„å˜é‡å’Œå€¼ä¹‹é—´å­˜åœ¨ç©ºæ ¼ï¼Œå¦åˆ™å°†æ— æ³•åŠ è½½data.ymlæ–‡ä»¶ã€‚
</p></div>

<p><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œå¹¶åŸºäºæµ‹è¯•æ•°æ®æ‰§è¡Œä¸€äº›æ–­è¨€ï¼š
</p>
<div class="prettify">
<pre>
@Test
public void fullTest(){
    	
    Fixtures.load(&quot;data.yml&quot;);
    	
    //è®¡æ•°
    assertEquals(2,User.count());
    assertEquals(3,Post.count());
    assertEquals(3,Comment.count());
    	
    //è¿æ¥åˆ°ç”¨æˆ·
    assertNotNull(User.connect(&quot;demo@oopsplay.org&quot;, &quot;123&quot;));
    assertNotNull(User.connect(&quot;demo2@oopsplay.org&quot;,&quot;123&quot;));
    assertNull(User.connect(&quot;demo@oopsplay.org&quot;, &quot;456&quot;));
    assertNull(User.connect(&quot;dhl@oopsplay.org&quot;, &quot;123&quot;));
    	
    //æŸ¥æ‰¾æ‰€æœ‰savageå‘è¡¨çš„æ–‡ç« 
    List&lt;Post&gt; savagePosts=Post.find(&quot;author.email&quot;,&quot;demo@oopsplay.org&quot;).fetch();
    assertEquals(1,savagePosts.size());
    	
    //æŸ¥æ‰¾æ‰€æœ‰savageå‘è¡¨æ–‡ç« ä¸­çš„è¯„è®º
    List&lt;Comment&gt; savageComments=Comment.find(&quot;post.author.email&quot;,&quot;demo@oopsplay.org&quot;).fetch();
    assertEquals(2,savageComments.size());
    	
    //æŸ¥æ‰¾æœ€æ–°å‘è¡¨çš„æ–‡ç« 
    Post frontPost=Post.find(&quot;order by postedAt desc&quot;).first();
    assertNotNull(frontPost);
    assertEquals(&quot;The MVC application&quot;,frontPost.title);
    	
    //æ£€æŸ¥è¯¥æ–‡ç« ä¸‹æ²¡æœ‰è¯„è®º
    assertEquals(0,frontPost.comments.size());
    	
    //å‘è¡¨ä¸€æ¡æ–°çš„è¯„è®º
    frontPost.addComment(&quot;dhlzj&quot;, &quot;come on,savage&quot;);
    assertEquals(1,frontPost.comments .size());
    assertEquals(4,Comment.count());
    	
}
</pre>
</div>







        
  </div>


  

  
  <div id="attach" class="hidetab" >

    










<div id="addattachment">
<h3>Add new attachment</h3>


<div class="formhelp">Only authorized users are allowed to upload new attachments.</div>

</div>



  </div>

  
    
  <div id="info" class="hidetab" >

  </div>

    
  

<div style="clear:both;" ></div>
</div>

      







<div id='actionsBottom' class="pageactions"> 
    

    <a href="#top" 
      class="action quick2top" 
      title="Go to top" >&laquo;</a>

    
       This page (revision-16) was last changed on <a href="../Diff.jsp-page=æ•°æ®æ¨¡å‹è¿­ä»£&r1=16&r2=15.htm" tppabs="http://www.playframework.cn/Diff.jsp?page=%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E8%BF%AD%E4%BB%A3&r1=16&r2=15">06-Apr-2012 05:41</a> by éƒ‘èˆ’å¤©
    

    

   

  

   
</div>

    </div>

    






<div id="favorites">

  






<div class="userbox">

  
    <span class="username anonymous">
      G&#8217;day (anonymous guest)
    </span>
  
  
  

  
  
  
    
      <a href="../Login.jsp-redirect=æ•°æ®æ¨¡å‹è¿­ä»£.htm" tppabs="http://www.playframework.cn/Login.jsp?redirect=%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E8%BF%AD%E4%BB%A3" 
        class="action login"
        title="Log in or Register as new user">Log in</a>
    
  
  
  
  

  
  
    <a href="../UserPreferences.jsp-redirect=æ•°æ®æ¨¡å‹è¿­ä»£.htm" tppabs="http://www.playframework.cn/UserPreferences.jsp?redirect=%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E8%BF%AD%E4%BB%A3"
      class="action prefs" accesskey="p"
      title="Manage your preferences [ p ]">My <span class='accesskey'>P</span>refs
    </a>
  
  

  <div class="clearbox"></div>

</div>
  
  <div id="hiddenmorepopup">
  <ul id="morepopup">
     
       	
     
       
     
    
       
     
       <li>
       
       <a class="action rawpage wikipage" 
               href="æ•°æ®æ¨¡å‹è¿­ä»£-skin=raw.htm" tppabs="http://www.playframework.cn/wiki/%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E8%BF%AD%E4%BB%A3?skin=raw"
              title="View Page Source">View Page Source
       </a>
       
       
       </li>
      
        
  
      
      
      

      
	  <li class='separator'>
        <div id="moremenu" ></div>
      </li>
  </ul>
  </div>
  
  

  

  

  
  <div class="leftmenu">
    <hr />
<p><b>Play!China Wiki</b>
</p>
<p />
<ul><li><a class="wikipage" href="PlayFramework Tutorial.htm" tppabs="http://www.playframework.cn/wiki/PlayFramework%20Tutorial">ä¹¦ç±æ’°å†™</a>
</li></ul><ul><li><a class="wikipage" href="PlayChina Team.htm" tppabs="http://www.playframework.cn/wiki/PlayChina%20Team">å›¢é˜Ÿé¦–é¡µ</a>
</li></ul><ul><li><a class="wikipage" href="å›¾ç‰‡èµ„æº.htm" tppabs="http://www.playframework.cn/wiki/%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90">å›¾ç‰‡èµ„æº</a>
</li></ul><ul><li><a class="wikipage" href="ç¤¾åŒºç°çŠ¶.htm" tppabs="http://www.playframework.cn/wiki/%E7%A4%BE%E5%8C%BA%E7%8E%B0%E7%8A%B6">ç¤¾åŒºç°çŠ¶</a>
</li></ul><ul><li><a class="wikipage" href="å‘å±•è½¨è¿¹.htm" tppabs="http://www.playframework.cn/wiki/%E5%8F%91%E5%B1%95%E8%BD%A8%E8%BF%B9">å‘å±•è½¨è¿¹</a>
</li></ul><ul><li><a class="wikipage" href="è”ç³»æˆ‘ä»¬.htm" tppabs="http://www.playframework.cn/wiki/%E8%81%94%E7%B3%BB%E6%88%91%E4%BB%AC">è”ç³»æˆ‘ä»¬</a>
</li></ul>
    
  </div>
  
  <div class="leftmenufooter">
    <hr />
<p><b>Official Platform</b>
</p>
<ul><li><a class="external" href="javascript:if(confirm('http://www.oopsplay.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='http://www.oopsplay.org/'" tppabs="http://www.oopsplay.org/">å®˜æ–¹é—¨æˆ·</a><img class="outlink" src="../images/out.png" tppabs="http://www.playframework.cn/images/out.png" alt="" />
</li></ul><p />
<ul><li><a class="external" href="mailto:dhl@playframework.cn">å›¢é˜Ÿé‚®ç®±</a><img class="outlink" src="../images/out.png" tppabs="http://www.playframework.cn/images/out.png" alt="" />
</li></ul><p />
<hr />
<b>Cooperative Site</b>
<p><br />
<table border="0" class="imageplugin">
<tr><td><img src="../attach/LeftMenuFooter/oschina_logo.png" tppabs="http://www.playframework.cn/attach/LeftMenuFooter/oschina_logo.png" /></td></tr>
</table>

<table border="0" class="imageplugin">
<tr><td><img src="../attach/LeftMenuFooter/logo.gif" tppabs="http://www.playframework.cn/attach/LeftMenuFooter/logo.gif" height="75" width="165" /></td></tr>
</table>

<table border="0" class="imageplugin">
<tr><td><img src="../../tva1.sinaimg.cn/crop.0.0.180.180.180/634352b0jw1e8qgp5bmzyj2050050aa8.jpg" tppabs="http://tp1.sinaimg.cn/1665356464/180/1279885352/1" height="165" width="165" /></td></tr>
</table>

</p>
<p />
    
  </div>

  

  
  <!-- 
  <div class="wikiversion">JSPWiki v2.8.4
  --> 
 <span class="rssfeed">
    
  </span>
  </div>  
  <div style="display:none">
    <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1252938720'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/stat.php%3Fid%3D1252938720' type='text/javascript'%3E%3C/script%3E"));</script>
  </div>
</div>


	<div class="clearbox"></div>
  </div>

  





 
<div id="footer">

  <div class="applicationlogo" > 
    <a href="PlayFramework Tutorial.htm" tppabs="http://www.playframework.cn/wiki/PlayFramework%20Tutorial"
       title="Go to home page PlayFramework Tutorial ">Home</a>
  </div>

  <div class="companylogo"></div>

  <div class="copyright"></div>

  <div class="wikiversion">
    JSPWiki v2.8.4
  </div>

  <div class="rssfeed">
    
  </div>

</div>

</div>

</body>
</html>

